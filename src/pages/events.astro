---
import type { EventsEntry } from "@/types";
import HeroLayoutWithHTML from "@components/common/HeroLayoutWithHTML.astro";
import { getEntry, render } from "astro:content";
import eventsHero from "@assets/front_page.jpeg";
import confluenceLogo from "@assets/logo/sage-green-logo.png";

const entry = (await getEntry("events", "events")) as EventsEntry;
const { Content } = await render(entry);

// Event data - this could be moved to a separate data file or CMS in the future
const events = [
  {
    id: "womens-trail-collective-2026",
    title: "Women's Trail Collective",
    subtitle: "At Lacamas Lake",
    description: "A low-pressure 5k and 10k trail run, made by women, for women.",
    date: "June 28, 2026",
    status: "Registration and more information coming soon.",
    image: eventsHero,
    category: "upcoming"
  }
];

const upcomingEvents = events.filter(event => event.category === "upcoming");
---

<HeroLayoutWithHTML 
  title=""
  description={entry.data.description}
  heroImage={eventsHero}
  logo={confluenceLogo}
  logoAlt="Confluence Running Collective Logo"
  heroImageAlt="Events Hero"
  contentClass="content-beige"
  heroTextClass="text-white"
  heroOverlayOpacity={50}
  heroMinHeight="min-h-[60vh]"
>
  <!-- Introduction Section -->
  <div class="max-w-4xl mx-auto text-center mb-16">
    <Content />
  </div>

  <!-- Upcoming Events Section -->
  <div class="max-w-6xl mx-auto mb-16">
    <div class="text-center mb-12">
      <h2 class="text-3xl font-bold mb-4">Upcoming</h2>
    </div>
    
    <div class="space-y-8">
      {
        upcomingEvents.map((event, index) => {
          const cardId = `event-card-${index}`;
          return (
            <div 
              id={cardId}
              class="event-card glass rounded-lg overflow-hidden hover:shadow-xl transition-all duration-500 cursor-pointer transform hover:-translate-y-1"
              data-event-id={cardId}
            >
              <div class="flex flex-col md:flex-row">
                <!-- Event Image -->
                <div class="md:w-1/3 h-64 md:h-auto bg-gradient-to-br from-lightgreen-txt-p to-lightgreen-txt-s transition-all duration-700">
                  <div class="h-full flex items-center justify-center">
                    <div class="w-32 h-32 bg-[rgb(246,242,232)] rounded-full flex items-center justify-center shadow-lg transition-all duration-700">
                      <span class="text-4xl font-bold text-lightgreen-txt-p transition-all duration-700">
                        {event.title.split(' ').map((n: string) => n[0]).join('')}
                      </span>
                    </div>
                  </div>
                </div>
                
                <!-- Event Info -->
                <div class="md:w-2/3 p-8 transition-all duration-700">
                  <div class="mb-4">
                    <h3 class="text-2xl text-glass-txt-p font-bold mb-2">{event.title}</h3>
                    <p class="text-lg text-glass-txt-p font-semibold mb-3">{event.subtitle}</p>
                  </div>
                  
                  <p class="text-lg leading-relaxed text-glass-txt-p mb-4">
                    {event.description}
                  </p>
                  
                  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                    <div class="mb-4 sm:mb-0">
                      <p class="text-xl font-bold text-lightgreen-txt-p mb-2">{event.date}</p>
                      <p class="text-sm text-glass-txt-p italic">{event.status}</p>
                    </div>
                    
                    <button class="text-lightgreen-txt-p font-semibold hover:text-lightgreen-txt-s transition-colors duration-200 px-6 py-2 border-2 border-lightgreen-txt-p rounded-lg hover:bg-lightgreen-txt-p hover:text-white">
                      Learn More â†’
                    </button>
                  </div>
                </div>
              </div>
            </div>
          );
        })
      }
    </div>
  </div>
</HeroLayoutWithHTML>

<style>
  .event-card {
    transition: all 0.3s ease;
    margin: 0.5rem;
  }
  
  /* Enhanced hover effects */
  .event-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
  }
  
  @media (max-width: 768px) {
    .event-card .md\:flex-row {
      flex-direction: column;
    }
    
    .event-card .md\:w-1\/3,
    .event-card .md\:w-2\/3 {
      width: 100%;
    }
  }
</style>
